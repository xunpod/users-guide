---
title: GParted 磁盘分区工具操作方式

---

# GParted 磁盘分区工具操作方式

## 介绍
GParted 应用程序是 GNOME 分区编辑器，用于创建、重新组织和删除磁盘分区。

磁盘设备可以细分为一个或多个分区。GParted 应用程序可让您更改磁盘设备上的分区组织，同时保留分区的内容。

使用 GParted 您可以完成以下任务：

- 在磁盘设备上创建分区表。
- 启用和禁用分区标志，例如启动和隐藏。
- 对分区执行操作，例如创建、删除、调整大小、移动、检查、标记、复制和粘贴。


    > [!NOTE]警告
    > 编辑分区可能会导致数据丢失。
    > GParted 应用程序旨在让您能够编辑分区，同时降低数据丢失的风险。该应用程序经过仔细测试，并由 GParted 项目团队使用。但是，由于软件错误、硬件问题或电源故障，可能会发生数据丢失。 
    > 在 GParted 运行时，不要挂载或卸载 GParted 应用程序之外的分区，这有助于降低数据丢失的风险。 
    > 建议您在使用 GParted 应用程序之前备份数据。对于加密数据尤其如此，因为一旦发生故障，所有数据都可能永久无法访问。


## 入门

### 启动 GParted

您可以通过以下方式启动 GParted ：

- 应用程序菜单
选择系统工具 → GParted 分区编辑器。

- 命令行
以 root 身份执行以下命令：
```
sudo gparted
```

在启动时，GParted 将扫描您的计算机以查找磁盘设备。

### GParted窗口
当您启动 GParted 时，将显示以下窗口：

图 1. GParted 窗口


GParted 窗口包含以下元素：

菜单栏
菜单栏上的菜单包含在 GParted 中使用磁盘设备和分区所需的所有命令 。

工具栏
工具栏包含您可以从菜单栏访问的命令子集。

图形显示区
图形显示区包含所选磁盘设备上分区的直观表示。

文本显示区
文本显示区包含所选磁盘设备上分区的文本列表。

状态栏
状态栏显示有关当前 GParted 活动或待处理操作数的信息。

设备信息窗格

设备信息窗格显示有关所选磁盘设备的详细信息。

默认情况下不显示设备信息窗格。要显示设备信息窗格，请选择 “查看” → “设备信息”。

待处理操作窗格
待处理操作窗格显示队列中当前的分区操作列表。

默认情况下，当有 0 个待处理操作时，不会显示待处理操作窗格。要显示待处理操作窗格，请选择 “视图” → “待处理操作”。

在任一显示区域中单击左键时，您可以选择一个分区用于分区编辑操作。

当您在任一显示区域单击鼠标右键时，应用程序会显示一个弹出菜单。弹出菜单包含最常见的分区编辑操作。

与其他 GNOME 应用程序一样， GParted 中的操作 可以通过多种方式执行：使用菜单、使用工具栏或使用快捷键。

### 从命令行运行GParted

您可以从命令行运行 GParted 并指定一个或多个磁盘设备。

要从命令行使用多个磁盘设备，请键入以下命令，然后按Enter：
```shell
$ 分区/path-to-your-device1 /path-to-your-device2
```

## 查看文件系统支持

要查看文件系统支持的操作，请选择： 查看→文件系统支持。应用程序将显示文件系统支持对话框。

如果您在 GParted 运行时安装了软件 ，请单击“重新扫描支持的操作” 以刷新图表。该应用程序将刷新图表的显示。

要关闭文件系统支持对话框，请单击关闭。

## 使用设备

### 选择设备

要选择磁盘设备，请选择： GParted →设备并从列表中选择一个设备。应用程序在 GParted 窗口中显示设备分区布局。

### 查看设备信息
查看磁盘设备的信息：

1. 选择磁盘设备。
2. 选择： 查看→设备信息。应用程序在 GParted 窗口中打开侧窗格并显示有关设备的信息。

要关闭设备信息侧窗格，请取消选择： 查看→设备信息。

### 刷新所有设备

要刷新所有磁盘设备，请选择： GParted →刷新设备。应用程序将重新扫描所有磁盘设备并刷新 GParted 窗口中的设备分区布局。

### 创建新的分区表

1. 要在磁盘设备上创建新的分区表：
2. 选择磁盘设备。选择： 设备→创建分区表。应用程序会显示创建分区表 /path-to-device 对话框。
3. 可以从列表中选择不同的分区表类型。

    > [!NOTE]笔记
    > 对于小于 2 Tebibytes 的磁盘（假设扇区大小为 512 字节）， 默认分区表类型为 msdos ；对于大于或等于 2 Tebibytes 的磁盘， 默认分区表类型为 gpt  。


    > [!NOTE]笔记
    > 要使用没有分区表的磁盘，请选择循环以创建跨磁盘的虚拟分区。然后格式化为所需的文件系统。
    
    > [!NOTE]警告
    > 许多操作系统可以识别 gpt 和 msdos分区表，但无法识别所有类型的文件系统。无法识别文件系统意味着使用没有分区表的磁盘会面临更多风险。例如，如果无法识别文件系统，某些操作系统可能会提示格式化未分区的磁盘。

4. 单击“应用”以创建新的分区表。应用程序将新分区表写入磁盘设备。应用程序在 GParted 窗口中刷新设备分区布局。

    > [!NOTE]警告
    > 警告：这将删除整个磁盘设备上的所有数据。


## 使用分区

### 基本分区操作

这些操作不会改变磁盘设备上的分区。

#### 选择分区

要选择分区，请使用下列方法之一：

- 单击图形显示区中的一个分区。
- 单击文本显示区域中的某个分区。

该应用程序在 GParted 窗口的图形显示区域和文本显示区域中突出显示该分区 。
> [!NOTE]警告
> 删除、移动、复制、格式化、检查、标记以及经常调整大小等分区操作都需要卸载分区。

#### 选择未分配的空间

要选择未分配的空间，请使用以下方法之一：

- 单击图形显示区域中的 未分配。
- 点击文本显示区域中的 未分配。

应用程序在 GParted 窗口的图形显示区域和文本显示区域中突出显示未分配的空间。

> [!NOTE]提示
> 如果您没有任何具有未分配空间的磁盘设备，您可以尝试以下操作：
> - 向您的计算机添加新的磁盘设备。
> - 缩小包含未使用空间的分区。

#### 查看分区信息

要查看有关分区的信息：

1. 选择一个分区。

2. 选择： 分区→信息。应用程序将打开有关分区信息的对话框。


#### 挂载分区

要挂载分区：

1. 选择一个未挂载的分区。

2. 选择： 分区→挂载 ，然后从列表中选择一个挂载点。应用程序将分区挂载到挂载点上，并在 GParted 窗口中刷新设备分区布局。

    > [!NOTE]笔记
    > 如果 分区→挂载 不可见，那么 GParted 就不知道应该将分区挂载在哪里。

#### 卸载分区

要卸载分区：
1. 选择已挂载的分区。
2. 选择： 分区→卸载。应用程序从挂载点卸载分区，并在 GParted 窗口中刷新设备分区布局。
    > [!NOTE]笔记
    > 如果分区→卸载不成功，则该分区可能正在被使用。
    > 要卸载所有分区并使其可用于分区编辑操作，请从 Live CD 启动并使用 GParted 。

#### 打开加密分区

要打开 LUKS 加密分区：

1. 选择一个封闭的 LUKS 加密分区。
2. 选择： 分区→打开加密。
   如果 GParted 还不知道 LUKS 密码，它将打开一个LUKS 密码 对话框。在/path-to-partition密码文本框中输入 LUKS 密码 ，然后单击 解锁。
   应用程序打开加密分区并刷新 GParted 窗口中的设备分区布局。

    > [!NOTE]笔记
    > GParted 在运行时会将每个 LUKS 密码记住在计算机内存中。这样，当再次重新打开同一个加密分区时，它就不必提示。当 GParted 关闭时，所有记住的 LUKS 密码都会从内存中清除并被遗忘。

#### 关闭加密分区

要关闭 LUKS 加密分区：

1. 选择一个未挂载且已 LUKS 加密的分区。

2. 选择： 分区→关闭加密。应用程序关闭 LUKS 加密并刷新 GParted窗口中的设备分区布局。


### 中间分区操作

这些操作将改变磁盘设备上的分区。这些操作不会修改现有分区的起始或结束边界。

#### 创建新分区

要创建新分区：

1. 选择磁盘设备上的未分配空间。
2. 选择： 分区→新建。应用程序显示创建新分区对话框。
3. 指定分区的大小和位置。
4. 指定分区的对齐方式。
5. 指定分区的类型。
6. 启用该字段时指定分区的名称。
7. 指定分区的文件系统类型。
8. 指定分区的文件系统标签。
9. 单击“添加”将创建分区操作添加到操作队列。应用程序将在GParted窗口的“待处理操作”窗格中显示创建分区操作。

#### 删除分区

要删除分区：

1. 选择一个未挂载的分区。

2. 选择： 分区→删除。应用程序将在待处理操作窗格中显示删除分区操作。

    > [!NOTE]警告
    > 如果删除逻辑分区，则该逻辑分区之后的所有现有逻辑分区的设备名称都会发生变化。
    > 例如，一个扩展分区包含四个逻辑分区A、B、C、D，操作系统对这四个逻辑分区的访问方式如下：
    > - 分区 A 为 /dev/sda5。
    > - 分区 B 为 /dev/sda6。
    > - 分区 C 为 /dev/sda7。
    > - 分区 D 为 /dev/sda8。
    >
    > 如果删除分区 B，则操作系统将按如下方式访问剩余的逻辑分区：
    > - 分区 A 为 /dev/sda5。
    > - 将 C 分区设为 /dev/sda6。
    > - 将 D 分区设为 /dev/sda7。
    >
    > 如果使用设备名称装入分区，则设备名称的更改可能会导致问题。装入分区时，可以使用分区的文件系统标签或通用唯一标识符 (UUID) 来避免此问题。
    > 设备名称的更改可能会对以下文件产生不利影响：
    > - /etc/fstab —包含要挂载的文件系统列表。
    > - /boot/grub/menu.lst — 包含 grub 引导加载程序的操作系统引导说明 。

    > [!NOTE]笔记
    > 具有循环分区表或无分区表的磁盘不包含分区表，也不包含分区。没有分区表的磁盘上的文件系统在 GParted 中由虚拟分区表示。
    > 要删除文件系统和虚拟分区，请选择格式化以清除。


#### 命名分区

> [!NOTE]笔记
> 分区命名仅适用于 GUID 分区表（GPT）。

要设置分区的名称：

1. 选择一个未挂载的分区。
2. 选择： 分区→命名分区。应用程序将打开一个设置分区名称 /path-to-partition 对话框。
3. 在名称文本框中键入分区名称。
4. 单击“确定” 。应用程序将在“待处理操作”窗格中显示设置分区名称操作。

#### 格式化分区
要格式化分区：
1. 选择一个未挂载的分区。
2. 选择： 分区→格式化为，然后从列表中选择文件系统类型。应用程序在操作待处理窗格中显示格式化分区操作。
   
#### 设置分区文件系统标签

要在分区中设置文件系统的标签或卷名：
1. 选择一个未挂载的分区。
2. 选择： 分区→标签文件系统。应用程序将打开“设置文件系统标签” /path-to-partition 对话框。
3. 在标签文本框中键入标签名称。
4. 单击“确定” 。应用程序将在“待处理操作”窗格中显示设置文件系统标签操作。

#### 更改分区 UUID

要更改分区的通用唯一标识符 (UUID)：
1. 选择一个未挂载的分区。
2. 选择： 分区→新 UUID 。应用程序在“待处理操作”窗格中显示设置新随机 UUID 操作 。


    > [!NOTE]警告
    >更改 UUID 可能会使 Windows 产品激活密钥 (WPA) 无效。
    >在 FAT 和 NTFS 文件系统上，卷序列号用作 UUID。更改 Windows 系统分区（通常为 C:）上的卷序列号可能会使 WPA 密钥无效。无效的 WPA 密钥将阻止登录，直到您重新激活 Windows。
    >为了避免使 WPA 密钥无效，在 NTFS 文件系统上，只有一半的 UUID 被设置为新的随机值。在 FAT 文件系统上，这种预防措施是不可能的。
    >更改数据分区或可移动媒体分区的 UUID 不会影响 WPA 密钥。在极少数情况下，启动时存在的分区可能是此规则的例外。
    
    > [!NOTE]警告
    >在没有必要的情况下更改 UUID 可能会导致 GNU/Linux 系统无法启动，或者无法挂载文件系统。
    >仅在复制分区后才需要更改 UUID。当源分区和分区副本在同一台计算机上使用时，需要更改 UUID 以防止出现重复的 UUID。
    >如果出现启动或挂载问题，您可能需要编辑配置文件（例如 /etc/fstab），并重新生成 grub 菜单以确保指定了正确的 UUID。

#### 指定分区详细信息

在执行创建、调整大小和移动等操作时指定分区详细信息很有用。

##### 指定分区大小和位置

要指定分区的大小和位置，请使用以下一项或多项组合：

- 单击并按住图形区域任一端的箭头。在显示范围内向左或向右拖动箭头。
- 单击并按住图形区域中分区的中间位置。在显示范围内向左或向右拖动分区。
- 单击旋转按钮箭头，或输入数值来调整以下字段：
    + 前面有可用空间
    + 新尺寸
    + 自由空间跟随

应用程序将刷新图形区域和三个字段标签旁边的数字。

##### 指定分区对齐

要指定分区的对齐方式，请单击对齐到箭头按钮，然后从列表中选择。
- 对现代操作系统使用 MiB 对齐。此设置将分区对齐到精确的兆字节（1,048,576 字节）边界上的开始和结束。与 RAID 系统和固态驱动器（例如 USB 闪存驱动器）一起使用时，MiB 对齐可提供增强的性能。
- 使用柱面对齐来保持与 2000 年之前发布的操作系统（如 DOS）的兼容性。此设置将分区对齐到磁盘柱面边界上的开始和结束。

    > [!NOTE]提示
    > 现代磁盘设备报告的柱面/磁头/扇区值与磁盘设备上存储的数据不再具有直接的物理关系。因此，使用此对齐设置来提高性能不再有效。

- 仅当您对磁盘结构、分区表和引导记录有深入了解时才使用None 。此设置将分区边界相对于磁盘设备上任何紧接在前的分区的末尾放置。此设置不能保证保留或尊重引导记录所需的空间。

##### 指定分区类型

要指定分区类型，请单击创建为箭头按钮，然后从列表中选择。

> [!NOTE]笔记
> msdos 分区表对分区的限制如下：
> - 最多 4 个主分区。
> - 最多 3 个主分区和 1 个扩展分区。
> 扩展分区可以包含多个逻辑分区。某些 GNU/Linux 发行版支持访问磁盘设备上最多 15 个分区。
> - 分区的最大大小为 2 兆字节，使用 512 字节的扇区大小。分区还必须从磁盘设备的前 2 兆字节开始。

> [!NOTE]提示
> 主分区提供更好的数据可恢复性，因为分区边界存储在磁盘设备上的已知位置。

##### 指定分区名称

> [!NOTE]笔记
> 分区命名仅对 GUID 分区表 (GPT) 可用。因此，该字段仅在使用 GPT 分区的磁盘设备上启用。
> 另请参阅“创建新分区表”部分

要指定分区名称，请在分区名称文本框中键入名称 。

##### 指定分区文件系统

要指定分区的文件系统类型，请单击文件系统箭头按钮，然后从列表中选择。

> [!NOTE]笔记
> 一些文件系统的用途示例如下：
> - ext2、 ext3和 ext4文件系统可用于安装 GNU/Linux 和存储数据。
> - linux-swap可与 GNU/Linux 一起使用来增加计算机的虚拟内存。
> - fat16和 fat32文件系统可用于在免费和商业操作系统之间共享数据。
> - cleared可用于清除任何现有的文件系统签名并确保该分区被识别为空。
> - unformatted可用于仅创建分区而不写入文件系统。

##### 指定分区文件系统标签

要指定分区中的文件系统标签（也称为卷标），请在标签文本框中输入标签名称。

> [!NOTE]提示
> 文件系统标签可用于帮助您记住分区中存储的内容。
> 可以使用唯一的标签来使用 GNU/Linux 操作系统挂载文件系统。

### 高级分区操作

这些操作将改变磁盘设备上的分区。这些操作可能会修改现有分区的起始或结束边界。这些操作可能会导致操作系统无法启动。

#### 调整分区大小

可以通过单个 GParted 操作来调整分区大小和移动分区。

要调整分区大小：
1. 选择一个分区。
    > [!NOTE]提示
    > 未安装或非活动的分区启用大多数调整大小选项。
    > 支持在线调整某些已安装或活动分区的大小。但是，这种支持通常仅限于增大。
2. 选择： 分区→调整大小/移动。应用程序显示 调整大小/移动 /path-to-partition 对话框。
3. 调整分区的大小。
    > [!NOTE]提示
    > 如果您不想移动现有分区的起始位置，则不要更改可用空间前置值。如果分区已安装或处于活动状态，则您将无法更改可用空间前置值。
4. 指定分区的对齐方式。
5. 单击“调整大小/移动” 。应用程序将在“待处理操作”窗格中显示调整大小/移动分区操作。
6. 检查添加到“待处理操作”窗格 的操作 。
   如果操作涉及移动步骤，则考虑以下事项：
   - 移动步骤可能需要很长时间才能完成。
   - 如果该分区是操作系统启动分区，则移动步骤可能会导致操作系统无法启动。
   如果您不准备等待或修复潜在的操作系统启动问题，那么您可能希望撤消该操作。

> [!NOTE]提示
> 要扩大或移动分区，分区相邻处必须有未分配的空间。
> 如果要扩大逻辑分区，则未分配的空间必须位于扩展分区内。
> 如果要扩大主分区，则未分配的空间不能位于扩展分区内。
> 您可以通过调整扩展分区边界的大小将未分配的空间移动到扩展分区的内部或外部。

> [!NOTE]提示
> 为了提高缩小 NTFS 分区的能力，您可以考虑以下措施：
>
> - 对文件系统进行碎片整理。
> 使用 NTFS 的商业操作系统启动到安全模式可以提高文件系统碎片整理的能力。要进入安全模式，请 在计算机启动操作系统时 按F8 。
> - 使用以下命令检查分区是否有错误：
> C:> chkdsk /f /r
> 请记住重新启动回到使用 NTFS 的商业操作系统以允许 chkdsk 命令执行。
> - 暂时禁用页面文件。页面文件在分区中占据固定位置，碎片整理过程无法移动该位置。
> - 将大文件临时移动到另一个分区或磁盘设备。大文件定义为大于几百兆字节 (MB) 的文件。
> - 在调整 NTFS 分区大小之前，请确保正确关闭使用 NTFS 的商业操作系统
> - 在 NTFS 分区中至少保留 10% 的未使用空间。如果分区缩小太多，商业操作系统可能无法正常运行。
> - 缩小NTFS分区后，重新启动两次进入使用NTFS的商业操作系统。

#### 移动分区

可以通过单个 GParted 操作来移动和调整分区大小。

要移动分区：
1. 选择一个未挂载的分区。
2. 选择： 分区→调整大小/移动。应用程序显示调整大小/移动 /path-to-partition 对话框。
3. 调整分区的位置。
4. 指定分区的对齐方式。
5. 单击“调整大小/移动” 。应用程序将在“待处理操作”窗格中显示调整大小/移动分区操作。

> [!NOTE]提示
> 如果该分区是操作系统启动分区，则应用移动操作后操作系统可能无法启动。

> [!NOTE]提示
> 仅当加密映射关闭时才可以移动 LUKS 加密分区。

#### 复制并粘贴分区

要复制分区：
1. 选择一个未挂载的分区。
2. 选择： 分区→复制。应用程序将该分区标记为源分区。

粘贴分区：
1. 选择磁盘设备上的未分配空间。
2. 选择： 分区→粘贴。应用程序显示粘贴 /path-to-partition 对话框。
3. 如果需要，您可以调整分区的大小和位置。
4. 如果需要，您可以指定分区对齐。
5. 单击粘贴。应用程序将在待处理操作窗格中显示复制分区操作。

> [!NOTE]警告
> 分区的副本具有与源分区相同的文件系统标签和通用唯一标识符 (UUID)。这可能会在启动时或在挂载操作使用文件系统标签或 UUID 来识别分区时导致问题。
> 问题在于操作系统会随机选择挂载源分区或分区副本。例如，在第一次挂载操作中可能会挂载源分区。在下一次挂载操作中可能会挂载分区副本。随着时间的推移，分区挂载的这种随机性可能会使文件神秘地出现或消失，具体取决于挂载了哪个分区。随机挂载源分区或分区副本也可能导致严重的数据损坏或丢失。
> 为了避免此问题，建议您执行以下操作之一：
> - 将复制操作排队或应用后：
> 1. 更改源分区或分区副本的 UUID。
> 2. 如果文件系统标签不为空，则更改源或分区副本的文件系统标签。
> - 应用复制操作后，删除或重新格式化源分区。
> - 使用其他方法确保源分区和分区副本不会在同一台计算机上同时使用。例如，如果分区副本位于单独的驱动器上，则从计算机中删除该驱动器。

> [!NOTE]提示
> 仅当加密映射打开时，才可以复制 LUKS 加密分区内的文件系统。

> [!NOTE]笔记
> 为了防止意外解密数据，不允许粘贴到未分配的空间中以创建新分区。但是，可以将 LUKS 加密分区粘贴到现有的打开的 LUKS 加密分区中以保持加密，或粘贴到普通分区中以创建文件系统的未加密副本。

#### 管理分区标志

要管理分区标志：
1. 选择一个分区。

2. 选择： 分区→管理标志。应用程序将打开管理标志 /path-to-partition 对话框。
    - 要启用标志，请选中标志旁边的复选框。应用程序将启用的标志写入分区并刷新“管理标志” /path-to-partition 对话框。
    - 要禁用某个标志，请取消选中该标志旁边的复选框。应用程序会将禁用的标志写入分区并刷新“管理标志” /path-to-partition 对话框。

    > [!NOTE]笔记
    > 管理标志仅适用于具有分区表的磁盘。具有循环或无分区表的磁盘不包含分区表，也没有分区标志。

要关闭“管理标志” /path-to-partition 对话框，请单击“关闭”。

> [!NOTE]笔记
> msdos 分区表中标志的描述如下：
> - 一些商业操作系统引导加载程序会使用引导。引导标志指示分区是活动的还是可引导的。磁盘设备上只能有一个分区是活动的。
> - Diag 用于指示该分区用于诊断/恢复。
> - ESP 表示用于启动具有统一可扩展固件接口 (UEFI) 类 2 的计算机的 EFI 系统分区，其中包括对 BIOS 功能（包括 MBR 分区结构）的兼容性支持。
> - 一些商业操作系统使用 Hidden 标志。hidden 标志使分区对于操作系统不可见。
> - Irst 识别英特尔快速启动技术分区。
> - 一些商业操作系统引导加载程序使用 LBA。LBA 标志表示应使用逻辑块寻址 (LBA) 而不是柱面磁头扇区 (CHS) 寻址来访问分区。
> - LVM 用于指示该分区由逻辑卷管理器 (LVM) 使用。
> - Palo 由精密架构 - 精简指令集计算 (PA-RISC) 引导加载程序 palo 使用。
> - Prep 用于指示 Power Performance Computing (PowerPC) 硬件上的启动分区。
> - RAID 用于指示分区在廉价磁盘冗余阵列 (RAID) 中使用。

> [!NOTE]笔记
> gpt 分区表中标志的描述如下：
> - Atvrecv 用于指示 Apple TV 恢复分区。
> - BIOS_GRUB 表示 GRUB 2 引导加载程序经常使用的 BIOS 引导分区。
> - 一些商业操作系统引导加载程序会使用引导。引导标志指示分区是活动的还是可引导的。磁盘设备上只能有一个分区是活动的。
> - Diag 表示该分区用于诊断或恢复。
> - ESP 表示用于启动具有可扩展固件接口 (EFI) 类 1 或统一可扩展固件接口 (UEFI) 类 2 或 UEFI 类 3 的计算机的 EFI 系统分区。
> - 一些商业操作系统使用 Hidden 标志。hidden 标志使分区对于操作系统不可见。
> - HP-service 用于指示惠普服务分区。
> - Irst 识别英特尔快速启动技术分区
> - Legacy_boot 被一些特殊用途的软件用来指示该分区可能可启动。
> - LVM 表示该分区由逻辑卷管理器 (LVM) 使用。
> - Msftdata 识别包含 Microsoft 文件系统（例如 NTFS 或 FAT）的分区。
> - Msftres 用于指示 Microsoft 保留分区。
> - Prep 用于指示 Power Performance Computing (PowerPC) 硬件上的启动分区。
> - RAID 表示该分区用于廉价磁盘冗余阵列 (RAID)。


#### 检查分区

检查分区将尝试查找并修复文件系统中的问题。检查分区将尝试扩大文件系统以填满分区。
要检查分区：
1. 选择一个未挂载的分区。
2. 选择： 分区→检查。应用程序将在“待处理操作”窗格中显示检查分区操作。

### 使用操作队列

#### 撤销上一个操作

要撤消操作队列中的最后一个操作，请选择： 编辑→撤消最后一个操作。应用程序将从“待处理操作”窗格中显示的队列中删除最后一个操作。如果队列中没有剩余操作，应用程序将关闭 “待处理操作”窗格。

#### 清楚所有操作

要清除操作队列中的所有操作，请选择： 编辑→清除所有操作。应用程序将从队列中删除所有操作并关闭待处理操作窗格。

#### 应用所有操作

要应用所有操作：

1. 选择： 编辑→应用所有操作。应用程序将显示“ 将操作应用于设备”对话框。
    > [!NOTE]警告
    > 编辑分区可能会导致数据丢失。建议在执行分区编辑操作之前备份数据。
2. 单击“应用”。应用程序将显示 “应用待处理操作”对话框。应用程序将按照您创建操作的顺序应用每个待处理操作。每个操作完成后，应用程序将显示状态更新。
- 要查看更多信息，请单击“详细信息”。应用程序将显示有关操作的更多详细信息。
  要查看有关每个操作的步骤的更多信息，请单击每个步骤旁边的箭头按钮。
- 要停止正在执行的操作，请单击“取消”。应用程序将显示禁用的 “强制取消 (5)”按钮并倒计时 5 秒。
    > [!NOTE]笔记
    > 取消指示应用程序根据需要停止或回滚操作以确保数据完整性。
    
    如果 5 秒后操作仍未停止，应用程序将启用“强制取消”按钮。
    要强制停止操作，请单击 “强制取消”。应用程序将显示一个警告对话框。
    单击“继续操作”以允许回滚操作完成，或单击“取消操作”以取消回滚操作。

    > [!NOTE]警告
    > 取消操作 会终止安全回滚操作，并可能导致严重的文件系统损坏和数据丢失。建议您单击 继续操作以允许回滚完成。
    
    当应用程序完成执行操作时，应用程序会显示“ 保存详细信息”按钮和 “关闭”按钮。
3. 如果要保存应用所有操作的详细信息，请单击“保存详细信息”。
    a. 如果要更改默认文件名，请在名称文本框中输入文件名。

    b. 如果要将文件保存在 /root 以外的文件夹中，请单击浏览其他文件夹。应用程序将显示文件系统导航器。使用文件系统导航器选择一个文件夹。
    c. 单击“保存”以保存文件。应用程序将保存详细信息文件。
    > [!NOTE]警告
    > 如果您从 Live CD 使用GParted，则根文件系统存在于 RAM 内存中。关闭计算机时，保存到 Live CD 根文件系统的所有文件都将丢失。
    > 如果您将 GParted 详细信息保存到 Live CD 根文件系统，则需要将文件复制到更永久的存储中。更永久的存储示例包括硬盘驱动器或 USB 闪存驱动器。
4. 单击“关闭”。应用程序将关闭 “正在应用待处理操作”对话框。应用程序将重新扫描所有磁盘设备并刷新 GParted 窗口中的设备分区布局。
## 在 Live CD 上获取 GParted

Live CD 是一张包含可启动操作系统的光盘。Live CD 可让您从 CD 启动计算机。
从 Live CD使用 GParted 具有以下优点：

- 您可以编辑所有分区，因为分区尚未安装。
- 您可以在没有可启动操作系统的计算机上编辑分区。

许多 Live CD 发行版上均提供 GParted 应用程序。
您可以从以下网站下载包含 GParted 的 Live CD 映像 ：

- GParted 现场 CD https://GParted.org/livecd.php
- SystemRescue（也称为 SystemRescueCD） https://www.system-rescue.org

> [!NOTE]提示
> GParted Live CD 映像可以写入 USB 闪存驱动器。
> 如果您的计算机可以从通用串行总线 (USB) 启动，那么您可能更喜欢 从 USB 闪存驱动器 启动和使用 GParted 。

> [!NOTE]提示
> 为了避免在刻录 CD 映像文件时浪费空白 CD，请使用以下提示：
> - 确保下载文件的校验和与下载页面上发布的校验和相匹配。
> - 确保将 .iso 文件作为映像刻录到空白 CD。如果将 .iso 文件作为数据刻录到空白 CD，则 CD 将无法在计算机上启动。

## 修复操作系统启动问题
当您执行以下操作之一时，您的计算机可能无法启动操作系统：
- 删除分区。
- 移动分区。
- 安装另一个操作系统并覆盖主引导记录 (MBR)。

幸运的是，启动失败的问题通常可以得到修复。

### 修复 GRUB 启动问题

许多 GNU/Linux 发行版都使用 Grand Unified Boot loader (GRUB)。要修复 GRUB 启动问题，首先要确定使用的是哪个主要版本的 GRUB。
GRUB 有两个主要版本：
- GRUB，也称为 GRUB 2，涵盖 1.98 及更高版本。GRUB 2 可与 GUID 分区表 (GPT) 和 msdos 分区表配合使用。
- GRUB Legacy，传统上称为 GRUB，涵盖 0.9x 及更早版本。GRUB Legacy 仅适用于 msdos 分区表。

GRUB 2 在以下 GNU/Linux 发行版中用作默认引导加载程序：
- CentOS 7 及更高版本
- Debian 6 (Squeeze) 及更高版本
- Fedora 16 (Verne) 及更高版本
- openSUSE 12.2 及更高版本
- Ubuntu 9.10 (Karmic Koala) 及更高版本


#### 恢复 GRUB2 启动问题

使用以下步骤恢复 GRUB 2 引导加载程序：
1. 从 Live 媒体（例如 GParted Live 或 GNU/Linux 发行版映像）启动。打开终端窗口。
2. 确定哪个分区包含您的 GNU/Linux 发行版的 / 文件系统。
 使用 GParted 列出磁盘设备上的分区。查找包含 GNU/Linux / 文件系统的分区。此 Linux 分区可能会使用 ext2、ext3、ext4 或 btrfs 等文件系统。
    > [!NOTE]提示
    > 如果 / 分区位于 LVM 上，则逻辑卷管理器必须处于活动状态。可以使用以下命令启动 LVM：
```shell
# 更改-ay
```
对于 LVM，磁盘分区的等价物是逻辑卷。可以使用以下命令列出逻辑卷：
```shell
# lvscan
```
3. 通过输入（以 root 身份）创建挂载点目录：
```shell
# mkdir /tmp/mydir
```
4. 将 / 分区挂载到挂载点目录。例如，假设 / 文件系统包含在 /dev/sda5 分区中。输入（以 root 身份）：
```shell
# mount /dev/sda5 /tmp/mydir
```
5. 如果您有一个单独的 /boot 分区，例如在 /dev/sda3，则需要额外的步骤。挂载在 /tmp/mydir/boot 处输入 /boot 分区（如 根）：
```shell
# mount /dev/sda3 /tmp/mydir/boot
```
> [!NOTE]提示
> 如果你不知道你是否有单独的启动分区，那么你可能没有，可以忽略这步。
6. 准备更改 root 环境，请输入以下代码（以 root 身份）：
```shell
# mount --bind /dev /tmp/mydir/dev
```
```shell
# mount --bind /proc /tmp/mydir/proc
```
```shell
# mount --bind /sys /tmp/mydir/sys
```
7. 通过输入（以 root 身份）来更改 root 环境：
```shell
# chroot /tmp/mydir
```
8. 在启动设备上重新安装 GRUB 2。请注意，使用的是设备名称而不是分区名称。例如，如果 / 分区是 /dev/sda5，则设备是 /dev/sda。
    对于 Debian、Ubuntu 和其他分支 GNU/Linux 发行版，请输入以下命令（以 root 身份）：
```shell
# grub-install /dev/sda
```
对于 CentOS、Fedora、openSUSE 和其他分支 GNU/Linux 发行版，请输入以下命令（以 root 身份）：
```shell
# grub2-install /dev/sda
```
9. 输入以下命令（以 root 身份）退出 chroot 环境：
```shell
# exit
```
10. 重新启动计算机。

#### 恢复 GRUB 传统引导加载程序

使用以下步骤恢复 GRUB Legacy 引导加载程序：

1. 从 Live 媒体（例如 GNU/Linux 发行版映像）启动。打开终端窗口。
    > [!NOTE]笔记
    > Live 媒体必须包含 GRUB Legacy 引导加载程序。如果您的 GNU/Linux 发行版使用 GRUB Legacy，则发行版 Live 媒体也将包含 GRUB Legacy。
2. 从命令行启动 grub 应用程序（以 root 身份）。
```shell
# grub
```
3. 使用下列方法之一 查找grub stage1 的位置：
如果/boot文件夹存储在/分区中，请使用以下命令：
```shell
grub> find/boot/grub/stage1
```
如果 /boot 文件夹存储在与 / 分区不同的分区中，请使用以下命令：
```shell
grub>find/grub/stage1
```
find 命令的输出可能如下所示：
```shell
(hd0,0)
```
如果命令输出中列出了多行，则需要决定为 grub 使用哪个设备。
4. 通过指定 find 命令返回的设备来 设置 grub 根设备。这应该是包含启动目录的分区。
```shell
grub>root(hd0)
```
5. 使用以下命令将 grub 引导加载程序 重新安装到主引导记录 (MBR)：
```shell
grub>setup(hd0,0)
```
如果您想要将 grub 引导加载程序安装到分区的引导扇区中，请使用以下命令指定分区：
```shell
grub>setup(hd0,0)
```
6. 退出 grub 。
```shell
grub>quit
```
7. 重新启动计算机。

## 恢复分区表

如果您意外覆盖了分区表，则有可能能够恢复它。
testdisk 应用程序旨在帮助恢复丢失的分区。
如果未找到任何分区，您可以选择其他选项来尝试挽救数据。